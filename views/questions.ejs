<%- include('partials/header'); -%>

<nav class="sticky inset-0 h-auto max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl">
    <ul class="flex flex-row">
        <% for (let i = 1; i < ejsResponse.length + 1; i++) { %>

            
            <li class="p-2"><a href=#<%=i%>>Question <%=i%></a></li>

        <% } %>
    </ul>
</nav>


<h1 class="font-sans text-center py-8 text-green-700 text-2xl">Welcome to the Questions page!</h1>


<form action="/questions/delete" method='get'>
    <button class="font-sans text-center p-8 text-red-400"type="submit">Delete All Questions</button>
</form>


<form action="/questions" method='get'>
    <button class="font-sans text-center p-8 text-red-400"type="submit">No Questions? Refresh Here</button>
</form>

<p><%= pleaseAnswerEveryQuestion %></p>
<p>Number of Questions: <%= numberOfQuestions %></p>


<form action='/results' method='post' id='form'>


    <% for (let index = 0; index < ejsResponse.length; index++) { %>

        <div style="display: block;">
            <h2 id="<%= index + 1 %>" class="text-indigo-800 py-2 ml-4">Question <%= index + 1 %></h2>
            <p class="text-orange-800 p-4"> <%= ejsResponse[index].questionCategory %> </p>

            <!-- if else EJS syntax courtesy of Stack Overflow. Trivia Logic is mine. -->
            <% if (ejsResponse[index].questionType === 'boolean') { %>
                <p class="text-teal-500 p-4"> True or False? </p>
            <% } else { %>
                <p class="text-blue-500 p-4"> Multiple Choice </p>
            <% } %>


            <p class="text-yellow-700 p-4"> <%= ejsResponse[index].questionDifficulty %> </p>
            <p class="text-gray-800 p-4"> <%= ejsResponse[index].question %> </p>
            

            <!-- Use order alongside EJS partials to change the order of flexbox. -->

            <!-- Allow only 1 Radio Button to be Checked = https://stackoverflow.com/questions/5419459/how-to-allow-only-one-radio-button-to-be-checked#:~:text=Only%201%20radio%20button%20of,same%20name%20can%20be%20checked.&text=Give%20them%20the%20same%20name%2C%20and%20it%20will%20work.,check%20boxes%20can%20have%20many.&text=Just%20give%20them%20the%20same%20name%20throughout%20the%20form%20you%20are%20using. -->
            
            
            
            <% if (ejsResponse[index].questionType === 'boolean') { %>

            <div class="flex">
                <div class="order-2">
                    <label class="ml-2 text-green-500" for="<%= ejsResponse[index].correctAnswer %>"><%= ejsResponse[index].correctAnswer %></label>
                    <input class="p-1" type="radio" value="<%= ejsResponse[index].correctAnswer %>" name= <%= index %> ></input>
                </div>
                <div class="<% if (ejsResponse[index].incorrectAnswers[0] === 'False') { %>
                    order-last text-red-500
                    <% } else { %>
                    order-first text-red-500
                    <% } %>">
                    <label class="ml-2 p-1"  for="<%= ejsResponse[index].incorrectAnswers[0] %>"><%= ejsResponse[index].incorrectAnswers[0] %></label>
                    <input class="p-1" type="radio" value="<%= ejsResponse[index].incorrectAnswers[0] %>" name="<%= index %>"></input>
                </div>
            </div>

            <% } else { %>


            <div class="flex">
                <div class="text-green-500 order-<%= Math.floor(Math.random()*5) + 1; %>">
                    <input type="radio" value="<%= ejsResponse[index].correctAnswer %>" name= <%= index %> > <%= ejsResponse[index].correctAnswer %> </input>
                </div> 
                <div class="text-red-500 order-<%= Math.floor(Math.random()*5) + 1; %>">         
                    <input type="radio" value="<%= ejsResponse[index].incorrectAnswers[0] %>" name= "<%= index %>"> <%= ejsResponse[index].incorrectAnswers[0] %> </input>
                </div> 
                <div class="text-red-500 order-<%= Math.floor(Math.random()*5) + 1; %>">
                    <input type="radio" value="<%= ejsResponse[index].incorrectAnswers[1] %>" name= "<%= index %>"> <%= ejsResponse[index].incorrectAnswers[1] %> </input>
                </div> 
                <div class="text-red-500 order-<%= Math.floor(Math.random()*5) + 1; %>">
                    <input type="radio" value="<%= ejsResponse[index].incorrectAnswers[2] %>" name= "<%= index %>"> <%= ejsResponse[index].incorrectAnswers[2] %> </input>
                </div> 
            </div>


            <% } %>

        </div>

        <hr class="mt-2 mb-10">

    <% } %>

    <button type="submit">Submit All Answers</button>

</form>



<%- include('partials/footer'); -%>